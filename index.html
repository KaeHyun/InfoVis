<!DOCTYPE html>

<!-- 
    [ 6주차 pdf ]
    1) d3.select(selectorString)selects the first element that matches selectorString 
    2) d3.selectAll(selectorString) selects all elements that match selectorString
    3) selection.attr(name, value) sets the name attribute of the elements in selectionto value.
    4) selection.style(name, value) sets the name CSS property of the elements in selectionto value.
    5) selection.text(value) sets the text insidethe elements in selectionto value
    6) selection.append(tagName)adds a tagNameelement to each element in selection and returns a selection of the added element(s)


-->

<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://d3js.org/d3.v7.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

        <!-- components 속 js 파일들 -->
        <script src = "components/scatterPlot.js"></script>


        <title>TWITCH DATA</title>
        <style>
             body {
            background: #eee;
        }

        .container {
            width: 100%;
            max-width: 8000px;
            background: white;
        }

        </style>

        
        <nav class="container navbar navbar-light bg-light">
            <a class="navbar-brand" href="#">
                <img src="./pngwing.com.png" width="70" height="40" class="d-inline-block align-top" alt="">
                <span style="font-family: 'Consolas'; font-size: 24px; font-weight: bold; ">
                    Surf the Twitch Data
                </span>
              </a>
        </nav>
    </head>

    <body>
        
        
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="margin: 10px">
              Select the Language
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="#">All</a>
              <a class="dropdown-item" href="#">English</a>
              <a class="dropdown-item" href="#">Portuguese</a>
              <a class="dropdown-item" href="#">German</a>
              <a class="dropdown-item" href="#">Korean</a>
              <a class="dropdown-item" href="#">Russian</a>
              <a class="dropdown-item" href="#">Japanese</a>
              <a class="dropdown-item" href="#">Czech</a>
              <a class="dropdown-item" href="#">Turkish</a>
              <a class="dropdown-item" href="#">Polish</a>  
              <a class="dropdown-item" href="#">Thai</a>
            </div>
          </div>


          <div id="chart"></div>

        <script>
            

            d3.csv("https://raw.githubusercontent.com/KaeHyun/InfoVis/master/twitchdata-update.csv")
            .then(twitchData =>{

                //ScatterPlot 객체 생성
                const scatterPlot = new ScatterPlot(twitchData);
                
                //초기화
                scatterPlot.initialize();

                //Select the Language 드롭다운에 대한 이벤트 리스너 등록
                d3.selectAll(".dropdown-item")
                .on("click", function() {
                    var selectedLang = d3.select(this).text();
                    d3.select("#dropdownMenuButton").text(selectedLang);

                    //updateChart(selectedLang);
                    scatterPlot.update(selectedLang);
                });
            
                // 초기값으로 영어 선택
            scatterPlot.update("All");

            });

            /* Javascript and d3 here */
            
        </script>

    </body>

</html>